// App.jsx
import React from "react";
import {
  Button,
  Row,
  Col,
  Container,
  Pagination,
  PaginationItem,
  PaginationLink
} from 'reactstrap';
import { Link } from "react-router-dom";
import Resortcard from "./Resortcard";
import $ from 'jquery';

export default class App extends React.Component {
  constructor(){
    super();
    this.state = {
      resorts : [],
      presorts : [],
      perpage : 0
    }
    this.pairup = this.pairup.bind(this);

  }


 pairup(fetchedResorts){
    //Do magic
    console.log(fetchedResorts);
    var s = 2;
    var b = 0;
    var e = fetchedResorts.length;
    var mimic = fetchedResorts;
    var paired = [];
    for(b, e; b < e; b += s){
      paired.push(mimic.slice(b, b+s));
    }
    //console.log(paired);
    this.setState({presorts: paired});
  }


  componentWillReceiveProps(nextProps){
    console.log("fire");
    console.log(nextProps.match.params.page);
    this.setState({perpage : nextProps.match.params.page});
    console.log(this.state.resorts);
    //Here we want to break down the information
  }

  componentDidMount(){
      var pagenumber = this.props.match.params.page;
      //console.log(pagenumber);
      var temp;
      if(pagenumber == null){
        pagenumber = 1
      }
      else{
        temp = pagenumber.split(" ");
        pagenumber = temp[1];
      }
      console.log(pagenumber);
      var fetchfrom = "http://127.0.0.1:5000/api/trails?page=";
      fetchfrom += pagenumber;
      //console.log(fetchfrom);
      $.getJSON(fetchfrom).then(results => {this.pairup(results.objects)});
  }

  render () {
    var titles = {
      color:'white',
    };

    var center = {
      color: 'white',
      textAlign:'center'
    };


    return (
      <div>
      <div className="container-fluid" styles="background-color: #473c8b;">
      	<p styles='text-align:center'>
      	</p>
      	  <div className="card h-100 cardbg">
      			<div className="card-block">
      				<h1 style={titles} className="card-title" align="center">{}</h1>
      			</div>
      	</div>
      	<br></br>

      	<div className="row justify-content-center">
      		<div className="col col-m-3">
      			<h2 style={titles} id="difficultyheader">Difficulty</h2>
      			<var style={titles} id="difficulty"> {}</var>
      		</div>
      		<div className="col col-m-3">
      			<h2 style={titles} id="lengthheader">Length</h2>
      			<var style={titles} id="length">{} miles</var>
      		</div>
      		<div className="col col-m-3">
      			<h2 style={titles} id="elevationheader">Elevation</h2>
      			<var style={titles} id="ascent">{} foot ascent</var>
      			<br></br>
      			<var style={titles} id="descent">{} foot descent</var>
      		</div>
      	</div>
      	<br></br>

      	<div className="card h-100 cardbg">
      		<div className="card-title">
      			<br></br>
      			<h2 style= {center} textalign = 'center' id="description">Description</h2>
      		</div>
      		<br></br>
      		<p className="card-text">
      				Flash of Gold is part of an expanding trail network. The lowest part of the trail is moderate with many switchbacks and vistas on the way up or down. Hikers can bask in the scenery as the singletrack travels through the trees, fern groves, and open hillsides. At mile 4.45 the trail meets the Flash of Gold to BTR Connector and the end of the first phase 	 of construction.
      				<br></br>
      				The trail soon transitions to hand-built singletrack where it crosses over Spring Creek. In general, it's rougher technical and more narrow. Ahead, the trail overlaps with FS Road 301 for a series of switchbacks. On hikers right (south), past the third switchback, the trail has been constructed using 2A tax funds generated by hotel room taxes in Steamboat.
      				<br></br>
      				The steady climbing keeps going through big alpine meadows on the south-side of a tree dotted knoll. Around mile 8.3, the trail again overlaps a short section of road to complete a few switchbacks (you can bailout to FS Road 301 by turning left). Pretty soon Flash of Gold heads into the rocks. This final section links several sections of doubletrack with singletrack to deliver hikers to the end of FS Road 306.1A. From there, it's a short hike to connect with FS Road 306 and then to Buffalo Pass Road 60.
      				<br></br>
      		</p>
      	</div>
      	<br></br>
      	<div id="links" className="row justify-content-center">
      		<div className="col-lg-2">
      			<h2 style={titles}>Nearby Resorts:</h2>
      				<a id="resort" className="btn btn-primary" href="/resorts/1">Steamboat</a>
      		</div>
      		<div className="col-lg-2">
      			<h2 style={titles}>Photos:</h2>
      			<a id="photo" className="btn btn-primary" href="/photos/1">Flash of Gold</a>
      		</div>
      	</div>
      	<br></br>
      	<div className="row justify-content-center">
      		<h2 style={titles}> Related Video Content </h2>
      	</div>
      	<div className="row justify-content-center">
      		<iframe width="560" height="315" src="https://www.youtube.com/embed/slSJffakyPc" frameBorder="0" allow="autoplay; encrypted-media" allowFullScreen></iframe>
      	</div>
      <br></br>
      </div>
      </div>
    );
  }
}
